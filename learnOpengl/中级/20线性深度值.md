![输入图片说明](/imgs/2025-02-07/Mn4Ca6sAaf5jYKT8.png)

![输入图片说明](/imgs/2025-02-07/CzpWimBLyWbsil3O.png)

![输入图片说明](/imgs/2025-02-07/lO8gXgdIms2vuBN7.png)

以下是使用`ndc`得出的深度值，是非线性关系，我们将深度值输出为`rgb`颜色，
所以在离很近的时候变化剧烈（灰色），远的时候基本为白色（0
```glsl
void main()
{
	...

	finalColor = vec3(gl_FragCoord.z, gl_FragCoord.z, gl_FragCoord.z);

	FragColor = vec4(finalColor, 1.0);
}
```
```glsl
void main()
{
	vec3 r
	esult = vec3(0.0,0.0,0.0);

	//计算光照的通用数据
	vec3 normalN = normalize(normal);
	vec3 viewDir = normalize(worldPosition - cameraPosition);

	result += calculateDirectionalLight(directionalLight,normalN, viewDir);

	//环境光计算
	vec3 objectColor  = texture(sampler, uv).xyz;
	vec3 ambientColor = objectColor * ambientColor;

	vec3 finalColor = result + ambientColor;

	float Zndc = gl_FragCoord.z * 2.0 - 1.0;
	float linearDepth = 2.0 * near / (far + near - Zndc * (far - near));

	finalColor = vec3(linearDepth, linearDepth, linearDepth);

	FragColor = vec4(finalColor, 1.0);
}
```
<!--stackedit_data:
eyJoaXN0b3J5IjpbMTYwMDE1MzIwMCwtMTA0Nzg1OTI3MCwxNz
EyODE2NzExLDE1NDg0MDIxNzZdfQ==
-->