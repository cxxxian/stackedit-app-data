![输入图片说明](/imgs/2025-02-07/Mn4Ca6sAaf5jYKT8.png)

![输入图片说明](/imgs/2025-02-07/CzpWimBLyWbsil3O.png)

![输入图片说明](/imgs/2025-02-07/lO8gXgdIms2vuBN7.png)

void main()
{
	vec3 result = vec3(0.0,0.0,0.0);

	//计算光照的通用数据
	vec3 normalN = normalize(normal);
	vec3 viewDir = normalize(worldPosition - cameraPosition);

	result += calculateDirectionalLight(directionalLight,normalN, viewDir);

	//环境光计算
	vec3 objectColor  = texture(sampler, uv).xyz;
	vec3 ambientColor = objectColor * ambientColor;

	vec3 finalColor = result + ambientColor;

	float Zndc = gl_FragCoord.z * 2.0 - 1.0;
	float linearDepth = 2.0 * near / (far + near - Zndc * (far - near));

	finalColor = vec3(linearDepth, linearDepth, linearDepth);

	FragColor = vec4(finalColor, 1.0);
}
void main()
{
	vec3 r
	esult = vec3(0.0,0.0,0.0);

	//计算光照的通用数据
	vec3 normalN = normalize(normal);
	vec3 viewDir = normalize(worldPosition - cameraPosition);

	result += calculateDirectionalLight(directionalLight,normalN, viewDir);

	//环境光计算
	vec3 objectColor  = texture(sampler, uv).xyz;
	vec3 ambientColor = objectColor * ambientColor;

	vec3 finalColor = result + ambientColor;

	float Zndc = gl_FragCoord.z * 2.0 - 1.0;
	float linearDepth = 2.0 * near / (far + near - Zndc * (far - near));

	finalColor = vec3(linearDepth, linearDepth, linearDepth);

	FragColor = vec4(finalColor, 1.0);
}
<!--stackedit_data:
eyJoaXN0b3J5IjpbMTIxNjUxOTQ0MiwtMTA0Nzg1OTI3MCwxNz
EyODE2NzExLDE1NDg0MDIxNzZdfQ==
-->