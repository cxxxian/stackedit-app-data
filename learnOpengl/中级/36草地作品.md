# 原理解释

## 法线

![输入图片说明](/imgs/2025-02-18/GetKwgz7ByxxkhAz.png)

解释一下模型为什么法线需要朝上？
因为如果法线朝前的话，根据光照系统的设计，正面会亮，背面则会黑，法线朝上就不会有正反面的区分

## 风力

![输入图片说明](/imgs/2025-02-18/gjyrtOUQ2Ik0ltCU.png)

如何实现风力摆动
利用`rgb`通道
把最上面的`r`值设置为`1`，最下面设置为`0`，我们就得到了一个权重因子，并且`OpenGL`还会自己做插值得出中间数值

# 实例加载与几何更改
## 1.Geometry增加构造函数，加入Color的Attribute
在`geometry.h`
创建一个带有`colors`属性的构造函数，以及创建`color`的`vbo`
```cpp
public:
	Geometry(
		const std::vector<float>& positions,
		const std::vector<float>& normals,
		const std::vector<float>& uvs,
		const std::vector<float>& colors,
		const std::vector<unsigned int>& indices
	);
private:
	GLuint mVao{ 0 };
	GLuint mPosVbo{ 0 };
	GLuint mUvVbo{ 0 };
	GLuint mColorVbo{ 0 };
	GLuint mNormalVbo{ 0 };
	GLuint mEbo{ 0 };
```
## 2.创建实例读取模型的Loader
### 2.1更改Mesh为InstancedMesh
### 2.2更改Geometry生成加入ColorAttribute
## 3.编写统一赋材质的函数
<!--stackedit_data:
eyJoaXN0b3J5IjpbLTc3NjcwMDU2MiwtMTkzMjE1NzQyM119
-->