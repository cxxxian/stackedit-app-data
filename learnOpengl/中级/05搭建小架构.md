把main.cpp中的一大坨代码搭建一个结构直观的架构

![输入图片说明](/imgs/2024-11-23/5GmoGOV3Xo8Vj62q.png)
<!--stackedit_data:
eyJoaXN0b3J5IjpbLTE5NjgxNTYzNDUsLTIwODg3NDY2MTJdfQ
==
-->