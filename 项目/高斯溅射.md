
## ä¸€ã€è¯†åˆ«ä½ çš„ PLY æ ¼å¼ç±»å‹

é¦–å…ˆæ˜ç¡®ä½ çš„ `.ply` æ˜¯å“ªç§æ ¼å¼ï¼š

1.  **Unpacked æ ¼å¼**ï¼ˆæ¯ä¸ª splat æ˜¾å¼è®°å½•å±æ€§ï¼Œfloat ä¸ºä¸»ï¼‰
    
2.  **Packed æ ¼å¼**ï¼ˆå‹ç¼©ç¼–ç åçš„ï¼Œä½¿ç”¨ chunk åˆ†åŒºå’Œå­—èŠ‚ä½æ“ä½œï¼‰
    
3.  **SuperSplat æˆ–å…¶ä»–è‡ªå®šä¹‰æ ¼å¼**
    

ä¸åŒæ ¼å¼å½±å“è§£æå’Œä¸Šä¼ åˆ° GPU çš„æ–¹å¼ã€‚

----------

## ğŸ”„ äºŒã€åŸºæœ¬æµç¨‹æ¦‚è§ˆ

> ä»¥ä¸‹ä»¥ Three.js æˆ– WebGL ä¸ºä¾‹ï¼Œä¹Ÿé€‚ç”¨äºåŸç”Ÿ OpenGL / WebGPUã€‚

### 1. **åŠ è½½ `.ply` æ–‡ä»¶å¹¶è§£ææ•°æ®**

#### è§£ææ­¥éª¤ï¼š

-   è¯»å–å¤´éƒ¨ï¼ˆHeaderï¼‰  
    åˆ¤æ–­å±æ€§ç±»å‹ï¼Œå¦‚ï¼š
    
```
property float x 
property float y 
property float z 
property float scale_0 
property float quaternion_0 
property uchar red ...
```
    
-   æŒ‰æ•°æ®æ ¼å¼ï¼ˆASCII æˆ– binaryï¼‰è¯»å–æ‰€æœ‰ç‚¹ï¼ˆsplatï¼‰å±æ€§ï¼š
    
    -   ä½ç½®ï¼ˆx, y, zï¼‰
        
    -   æ–¹å‘ï¼ˆquaternion æˆ– covariance çŸ©é˜µï¼‰
        
    -   å°ºåº¦ï¼ˆscale_x, scale_y, scale_zï¼‰
        
    -   é¢œè‰²ï¼ˆRGB æˆ– RGBAï¼‰
        
    -   ä¸ç¡®å®šæ€§å‚æ•°ï¼ˆlog scale, alpha, etcï¼‰
        

> å¦‚æœæ˜¯ packed æ ¼å¼ï¼Œä½ éœ€è¦å…ˆâ€œè§£ç â€ä¸º float æ ¼å¼ï¼Œæ‰èƒ½ç»§ç»­åç»­å¤„ç†ã€‚

----------

### 2. **ç»„ç»‡æ•°æ®å¹¶ä¸Šä¼ åˆ° GPUï¼ˆæ„å»º Bufferï¼‰**

æŠŠæ¯ä¸ª splat çš„å±æ€§æ•´ç†æˆé€‚åˆä¸Šä¼ åˆ° GPU çš„ç»“æ„ï¼Œæ¯”å¦‚ï¼š

`// ç¤ºä¾‹ç»“æ„ [   center.x, center.y, center.z,   scale.x, scale.y, scale.z,   quat.x, quat.y, quat.z, quat.w,   r, g, b, a,   ... ]`

-   åˆ›å»º `Float32Array` æˆ– `Uint8Array` æ¥å­˜æ”¾è¿™äº›æ•°æ®ã€‚
    
-   ä½¿ç”¨ `THREE.BufferGeometry` å’Œ `BufferAttribute` ä¸Šä¼ ã€‚
    

----------

### 3. **ç¼–å†™è‡ªå®šä¹‰ç€è‰²å™¨ï¼ˆVertex + Fragmentï¼‰**

#### ğŸ¯ é¡¶ç‚¹ç€è‰²å™¨ï¼ˆVertex Shaderï¼‰

-   è§£æ splat çš„å±æ€§ï¼ˆä½ç½®ã€ç¼©æ”¾ã€æ–¹å‘ã€é¢œè‰²ç­‰ï¼‰
    
-   è®¡ç®—é«˜æ–¯æŠ•å½±åˆ°å±å¹•ç©ºé—´çš„æ¤­åœ†å‚æ•°ï¼ˆM matrix æˆ–ç±»ä¼¼ï¼‰
    
-   è¾“å‡ºç»™ç‰‡æ®µç€è‰²å™¨
    

#### ğŸ’¥ ç‰‡æ®µç€è‰²å™¨ï¼ˆFragment Shaderï¼‰

-   å¯¹æ¯ä¸ªåƒç´ åšé€æ˜èåˆï¼ˆalpha blendingï¼‰
    
-   åŸºäºé«˜æ–¯å¯†åº¦åœºå åŠ è´¡çŒ®ï¼ˆæƒé‡ + é¢œè‰²ï¼‰
    

å‚è€ƒé«˜æ–¯ splatting çš„è®ºæ–‡ä¸­çš„å±å¹•ç©ºé—´èåˆå…¬å¼ã€‚

----------

### 4. **æ··åˆè®¾ç½®ä¸æ¸²æŸ“æ§åˆ¶**

-   å¯ç”¨é€æ˜æ··åˆï¼š
    
    glsl
    
    å¤åˆ¶ç¼–è¾‘
    
    `gl.enable(gl.BLEND); gl.blendFunc(gl.ONE, gl.ONE); // åŠ æƒèåˆ`
    
-   æ§åˆ¶ splat æ•°é‡ï¼ˆLODã€Chunk-basedï¼‰
    
-   æ·±åº¦æ’åºæˆ–å‰å‘ç´¯åŠ ï¼ˆDepends on rendererï¼‰
<!--stackedit_data:
eyJoaXN0b3J5IjpbLTExMTEyODYxNDJdfQ==
-->