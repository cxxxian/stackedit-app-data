## C++ å¤šçº¿ç¨‹çš„åŸºæœ¬ç”¨æ³•ï¼š`std::thread`

ä» C++11 å¼€å§‹ï¼Œæˆ‘ä»¬å¯ä»¥ç”¨ `std::thread` åˆ›å»ºæ–°çº¿ç¨‹ã€‚

### ç¤ºä¾‹ï¼šåˆ›å»ºä¸€ä¸ªçº¿ç¨‹æ‰“å°æ•°å­—

```cpp
#include <iostream>
#include <thread>  
void printNumbers() {     
	for (int i = 1; i <= 5; ++i) {         
		std::cout << "å­çº¿ç¨‹è¾“å‡º: " << i << std::endl;     
	} 
}  
int main() {     
	std::thread t(printNumbers);// å¯åŠ¨æ–°çº¿ç¨‹æ‰§è¡Œ printNumbers     			
	t.join();// ç­‰å¾…çº¿ç¨‹æ‰§è¡Œå®Œæˆ     
	std::cout << "ä¸»çº¿ç¨‹ç»“æŸ" << std::endl;     
	return 0; 
}
```

### è¿è¡Œç»“æœï¼š

```makefile
å­çº¿ç¨‹è¾“å‡º: 1 
å­çº¿ç¨‹è¾“å‡º: 2
... 
ä¸»çº¿ç¨‹ç»“æŸ
```
## å¤šçº¿ç¨‹é™·é˜±ï¼š**å…±äº«æ•°æ®å’Œç«äº‰é—®é¢˜**

ä¸¤ä¸ªçº¿ç¨‹å¦‚æœåŒæ—¶è®¿é—®åŒä¸€ä»½æ•°æ®ï¼Œå°±å¯èƒ½å‡ºé”™ã€‚

### ç¤ºä¾‹ï¼ˆé”™è¯¯ç¤ºèŒƒï¼‰ï¼š

```cpp
int counter = 0;  
void countUp() {     
	for (int i = 0; i < 1000; ++i) counter++;// âŒ ä¸¤ä¸ªçº¿ç¨‹åŒæ—¶ä¿®æ”¹å¯èƒ½å¯¼è‡´é”™è¯¯ 
}
```

### âœ… æ­£ç¡®å†™æ³•ï¼šåŠ é”ä¿æŠ¤å…±äº«å˜é‡

```cpp
#include <mutex>  
std::mutex mtx; 
int counter = 0;  
void countUp() {     
	for (int i = 0; i < 1000; ++i) {         	std::lock_guard<std::mutex> lock(mtx);         counter++;     } }
```

> ğŸ”’ `std::mutex` å¯ä»¥ä¿æŠ¤ä¸€æ®µä»£ç åªè®©ä¸€ä¸ªçº¿ç¨‹è¿›å…¥ï¼Œé¿å…â€œæ•°æ®ç«äº‰â€ã€‚
<!--stackedit_data:
eyJoaXN0b3J5IjpbMTg3MjI4ODgxMV19
-->